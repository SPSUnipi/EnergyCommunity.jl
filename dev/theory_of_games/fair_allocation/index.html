<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Fair benefit allocation · EnergyCommunity.jl</title><meta name="title" content="Fair benefit allocation · EnergyCommunity.jl"/><meta property="og:title" content="Fair benefit allocation · EnergyCommunity.jl"/><meta property="twitter:title" content="Fair benefit allocation · EnergyCommunity.jl"/><meta name="description" content="Documentation for EnergyCommunity.jl."/><meta property="og:description" content="Documentation for EnergyCommunity.jl."/><meta property="twitter:description" content="Documentation for EnergyCommunity.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EnergyCommunity.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Introduction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../installation/">Installation guide</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/configurations/">Optimizing different configurations</a></li><li><a class="tocitem" href="../../examples/plotting/">Plotting</a></li><li><a class="tocitem" href="../../examples/io/">Input/Ouput to/from disk</a></li><li><a class="tocitem" href="../../examples/electric_vehicle/">Electric Vehicle</a></li><li><a class="tocitem" href="../../examples/heating_cooling/">Heating and Cooling Flexibility</a></li><li><a class="tocitem" href="../../examples/theory_of_games/">Fair reward allocations</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Optimization Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model/intro_model/">Architecture of the model</a></li><li><a class="tocitem" href="../../model/power_model/">User power model</a></li><li><a class="tocitem" href="../../model/energy_model/">User energy model</a></li><li><a class="tocitem" href="../../model/community_model/">Shared Energy and Benefits</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">Fair reward allocations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Fair benefit allocation</a><ul class="internal"><li><a class="tocitem" href="#Scope-of-fair-allocation-in-energy-communities"><span>Scope of fair allocation in energy communities</span></a></li><li><a class="tocitem" href="#Benefit-function"><span>Benefit function</span></a></li><li><a class="tocitem" href="#Benefit-versus-users&#39;-payoff"><span>Benefit versus users&#39; payoff</span></a></li></ul></li><li><a class="tocitem" href="../supported_allocations/">Supported fair allocation methods</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Configuration</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../configuration/configuration/">Configuration</a></li><li><a class="tocitem" href="../../configuration/general/"><code>general</code> Section</a></li><li><a class="tocitem" href="../../configuration/market/"><code>market</code> Section</a></li><li><a class="tocitem" href="../../configuration/users/"><code>users</code> Section</a></li><li><a class="tocitem" href="../../configuration/assets/">Asset types</a></li></ul></li><li><a class="tocitem" href="../../API reference/">API reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Fair reward allocations</a></li><li class="is-active"><a href>Fair benefit allocation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Fair benefit allocation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SPSUnipi/EnergyCommunity.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SPSUnipi/EnergyCommunity.jl/blob/main/docs/src/theory_of_games/fair_allocation.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Fair-benefit-allocation"><a class="docs-heading-anchor" href="#Fair-benefit-allocation">Fair benefit allocation</a><a id="Fair-benefit-allocation-1"></a><a class="docs-heading-anchor-permalink" href="#Fair-benefit-allocation" title="Permalink"></a></h1><h2 id="Scope-of-fair-allocation-in-energy-communities"><a class="docs-heading-anchor" href="#Scope-of-fair-allocation-in-energy-communities">Scope of fair allocation in energy communities</a><a id="Scope-of-fair-allocation-in-energy-communities-1"></a><a class="docs-heading-anchor-permalink" href="#Scope-of-fair-allocation-in-energy-communities" title="Permalink"></a></h2><p>EnergyCommunity.jl also provides tools for fair allocation of benefits among participants in an energy community supported by Game Theory. Fair allocation is crucial to ensure that all members are motivated to form, stay and contribute to the community&#39;s success. The package implements several well-known methods for fair allocation, including the Shapley value, the nucleolus, FairCore and FairLeastCore, among others, thanks to its interface with <a href="https://github.com/SPSUnipi/theoryofgames.jl">TheoryOfGames.jl</a>. While the optimization model described in the previous sections focuses on minimizing the overall costs of the energy community, fair allocation methods ensure that the benefits derived from cost savings are distributed equitably among all participants. For more details, please refer to:</p><blockquote><ul><li>D. Fioriti, A. Frangioni, D. Poli, &quot;Optimal sizing of energy communities with fair revenue sharing and exit clauses: Value, role and business model of aggregators and users,&quot; in Applied Energy, vol. 299, 2021, 117328,<a href="https://doi.org/10.1016/j.apenergy.2021.117328">doi: 10.1016/j.apenergy.2021.117328</a></li><li>D. Fioriti, G. Bigi, A. Frangioni, M. Passacantando and D. Poli, &quot;Fair Least Core: Efficient, Stable and Unique Game-Theoretic Reward Allocation in Energy Communities by Row-Generation,&quot; in IEEE Transactions on Energy Markets, Policy and Regulation, vol. 3, no. 2, pp. 170-181, June 2025, <a href="https://doi.org/10.1109/TEMPR.2024.3495237">doi: 10.1109/TEMPR.2024.3495237</a>.</li></ul></blockquote><p>Let <span>$j \in I$</span> be the set of participants (also known as &quot;grand coalition&quot;) in the energy community (including the aggregator <span>$A$</span>), and let <span>$v(J)$</span> a generic function that describes the benefit of creating and participating in an energy community for any subgroup <span>$J \subseteq I$</span> of participants. The goal of fair allocation methods is to distribute the total benefit <span>$v(I)$</span> among all participants in a way that is considered fair according to specific criteria defined by each method. In other words, the goal is to find an allocation vector <span>$\phi_j \; , \; \forall j \in I$</span> where <span>$\sum_{j \in I} \phi_j = v(I)$</span> and each <span>$\phi_j$</span> represents the fair share of the benefit allocated to participant <span>$j$</span>. In the following section, we describe examples of supported fair allocation methods.</p><h2 id="Benefit-function"><a class="docs-heading-anchor" href="#Benefit-function">Benefit function</a><a id="Benefit-function-1"></a><a class="docs-heading-anchor-permalink" href="#Benefit-function" title="Permalink"></a></h2><p>The benefit <span>$v(J)$</span> is typically calculated as the difference between the objective function <span>${SW}^{{group}_{agg}}(J)$</span> obtained by a cooperative configuration (usually <code>CO</code>) and the value <span>${SW}^{{group}_{base}}(J)$</span> obtained by a base configuration (typically <code>NC</code>). To account for the role of the aggregator, the behavior of the function depends on whether the aggregator <span>$A$</span> is part of the coalition <span>$J$</span> or not: when the aggregator is not included in the coalition, the benefit is calculated with respect to an alternative group <span>${SW}^{{group}_{no-agg}}(J)$</span> (e.g., <code>NC</code> or <code>ANC</code>). Formally, the characteristic function <span>$v(J)$</span> is defined as follows:</p><p class="math-container">\[v(J) = \begin{cases}
    {SW}^{{group}_{agg}}(J) - {SW}^{{group}_{base}}(J) &amp; &quot;A&quot; \in J \\
    {SW}^{{group}_{no-agg}}(J) - {SW}^{{group}_{base}}(J) &amp; &quot;A&quot; \notin J
\end{cases}\]</p><p>In typical scenarios, the cooperative configuration is represented by <code>CO</code>, while the base configuration is <code>NC</code>. When a community is unable to create an EC with no external support, the alternative group without the aggregator can be represented by <code>NC</code> and the characteristic function simplifies to the following typical case:</p><p class="math-container">\[v(J) = \begin{cases}
    {SW}^{CO}(J) - {SW}^{NC}(J) &amp; &quot;A&quot; \in J \\
    0 &amp; &quot;A&quot; \notin J
\end{cases}\]</p><h2 id="Benefit-versus-users&#39;-payoff"><a class="docs-heading-anchor" href="#Benefit-versus-users&#39;-payoff">Benefit versus users&#39; payoff</a><a id="Benefit-versus-users&#39;-payoff-1"></a><a class="docs-heading-anchor-permalink" href="#Benefit-versus-users&#39;-payoff" title="Permalink"></a></h2><p>As explained in the previous section, the benefit function <span>$v(J)$</span> quantifies the total advantage that a coalition of users <span>$J$</span> with respect to a base case allocation. Accordingly, the fair share of the benefit <span>$\phi_j$</span> allocated to participant <span>$j$</span> represents the portion of the total benefit <span>$v(I)$</span> that is fairly assigned to that participant <strong>with respect to the base case configuration</strong>.</p><p>Therefore, let&#39;s assume that each user <span>$j$</span> has a payoff <span>$\mathrm{NPV}^{base}_j$</span> in the base case configuration (e.g., <code>NC</code>). The total payoff for user <span>$j$</span> after fair allocation of the benefit is given by the sum of the base case payoff and the allocated fair share of the benefit:</p><p class="math-container">\[\mathrm{NPV}^{fair}_j = \mathrm{NPV}^{base}_j + \phi_j\]</p><p>Where:</p><ul><li><span>$\mathrm{NPV}^{fair}_j$</span> is the total payoff for user <span>$j$</span> after fair allocation.</li><li><span>$\mathrm{NPV}^{base}_j$</span> is the payoff for user <span>$j$</span> in the base case configuration (usually <code>NC</code>).</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../model/community_model/">« Shared Energy and Benefits</a><a class="docs-footer-nextpage" href="../supported_allocations/">Supported fair allocation methods »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Thursday 11 December 2025 23:41">Thursday 11 December 2025</span>. Using Julia version 1.12.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>

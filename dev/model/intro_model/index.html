<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Architecture of the model · EnergyCommunity.jl</title><meta name="title" content="Architecture of the model · EnergyCommunity.jl"/><meta property="og:title" content="Architecture of the model · EnergyCommunity.jl"/><meta property="twitter:title" content="Architecture of the model · EnergyCommunity.jl"/><meta name="description" content="Documentation for EnergyCommunity.jl."/><meta property="og:description" content="Documentation for EnergyCommunity.jl."/><meta property="twitter:description" content="Documentation for EnergyCommunity.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EnergyCommunity.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Introduction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../installation/">Installation guide</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/configurations/">Optimizing different configurations</a></li><li><a class="tocitem" href="../../examples/plotting/">Plotting</a></li><li><a class="tocitem" href="../../examples/io/">Input/Ouput to/from disk</a></li><li><a class="tocitem" href="../../examples/electric_vehicle/">Electric Vehicle</a></li><li><a class="tocitem" href="../../examples/heating_cooling/">Heating and Cooling Flexibility</a></li><li><a class="tocitem" href="../../examples/theory_of_games/">Fair reward allocations</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3"><span class="docs-label">Optimization Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Architecture of the model</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Techno-economic-model"><span>Techno-economic model</span></a></li><li><a class="tocitem" href="#Energy-Community-configurations"><span>Energy Community configurations</span></a></li></ul></li><li><a class="tocitem" href="../power_model/">User power model</a></li><li><a class="tocitem" href="../energy_model/">User energy model</a></li><li><a class="tocitem" href="../community_model/">Community Shared Energy and benefits</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Fair reward allocations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../theory_of_games/fair_allocation/">Fair benefit allocation</a></li><li><a class="tocitem" href="../../theory_of_games/supported_allocations/">Supported fair allocation methods</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Configuration</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../configuration/configuration/">Configuration</a></li><li><a class="tocitem" href="../../configuration/general/"><code>general</code> Section</a></li><li><a class="tocitem" href="../../configuration/market/"><code>market</code> Section</a></li><li><a class="tocitem" href="../../configuration/users/">3. <code>users</code> Section</a></li><li><a class="tocitem" href="../../configuration/assets/">Asset types</a></li></ul></li><li><a class="tocitem" href="../../API reference/">API reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Optimization Model</a></li><li class="is-active"><a href>Architecture of the model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Architecture of the model</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SPSUnipi/EnergyCommunity.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SPSUnipi/EnergyCommunity.jl/blob/main/docs/src/model/intro_model.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Architecture-of-the-model"><a class="docs-heading-anchor" href="#Architecture-of-the-model">Architecture of the model</a><a id="Architecture-of-the-model-1"></a><a class="docs-heading-anchor-permalink" href="#Architecture-of-the-model" title="Permalink"></a></h1><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>The optimization model implemented in EnergyCommunity.jl is based on a Mixed-Integer Linear Programming (MILP) model implemented in <a href="https://jump.dev/JuMP.jl">JuMP.jl</a>, accounting for:</p><ul><li>Technical operation of assets (loads, PV, storage, flexible resources).</li><li>Market interaction with the main grid (imports/exports, tariffs).</li><li>Energy shared among users of the community.</li><li>Configuration of the EC: non-cooperative, aggregated-non-cooperative, cooperative.</li></ul><p>In the following, we provide a general description of the mathematical model, starting from the techno-economic model that is valid for all EC configurations, and then describing the specific models suited for the specific configurations.</p><p>Please refer to the following references for more details:</p><blockquote><ul><li>D. Fioriti, G. Bigi, A. Frangioni, M. Passacantando and D. Poli, &quot;Fair Least Core: Efficient, Stable and Unique Game-Theoretic Reward Allocation in Energy Communities by Row-Generation,&quot; in IEEE Transactions on Energy Markets, Policy and Regulation, vol. 3, no. 2, pp. 170-181, June 2025, <a href="https://doi.org/10.1109/TEMPR.2024.3495237">doi: 10.1109/TEMPR.2024.3495237</a>.</li><li>D. Fioriti, A. Frangioni, D. Poli, &quot;Optimal sizing of energy communities with fair revenue sharing and exit clauses: Value, role and business model of aggregators and users,&quot; in Applied Energy, vol. 299, 2021, 117328,<a href="https://doi.org/10.1016/j.apenergy.2021.117328">doi: 10.1016/j.apenergy.2021.117328</a></li></ul></blockquote><h2 id="Techno-economic-model"><a class="docs-heading-anchor" href="#Techno-economic-model">Techno-economic model</a><a id="Techno-economic-model-1"></a><a class="docs-heading-anchor-permalink" href="#Techno-economic-model" title="Permalink"></a></h2><p>The techno-economic model of the Energy Community (EC) is based on the model depicted in the figure below, which highlights the general structure of components available by each user <span>$j \in I$</span>, where <span>$I$</span> is the set of community members, and energy flows. In the following, we first describe the user&#39;s expenses and then the main constraints of the model.</p><p><img src="../../images/energy_model.png" alt="Scheme of the Energy Community"/></p><h2 id="Energy-Community-configurations"><a class="docs-heading-anchor" href="#Energy-Community-configurations">Energy Community configurations</a><a id="Energy-Community-configurations-1"></a><a class="docs-heading-anchor-permalink" href="#Energy-Community-configurations" title="Permalink"></a></h2><p>The mathematical model implemented in EnergyCommunity.jl can be configured to represent different types of Energy Communities (ECs), namely:</p><ul><li><p><strong>Non-cooperative EC (NC)</strong>: In the <code>NC</code> configuration, each user <span>$j \in I$</span> optimizes its own energy system independently, without considering energy sharing with other community members. The objective function for each user is to maximize its own Net Present Value (NPV) based on individual energy consumption, generation, and costs. Let <span>${SW}^{NC}(J) = \sum_{j \in J} \mathrm{NPV}_j$</span> be the sum of the Net Present Value for all users, then the optimization problem for the Non-Cooperative formulation is formulated as follows:</p><p class="math-container">\[\begin{array}{ll}
\max &amp; {SW}^{NC}(I) = \sum_{j \in I} \mathrm{NPV}_j \\
\text{s.t.} &amp; \text{Users&#39; power and energy system constraints}
\end{array}\]</p><p>Note that as the problem is separable for each user <span>$j$</span>, it can be solved independently for each user. However, for simplicity, EnergyCommunity.jl implements the problem as a single optimization problem including all users as shown in the previous equation.</p></li><li><p><strong>Aggregated Non-cooperative EC (ANC)</strong>: In the <code>ANC</code> configuration, each user <span>$j \in I$</span> still optimizes its own energy system independently, but the model allows for the aggregation of certain resources or costs at the community level. This can include shared infrastructure or collective purchasing of energy, leading to potential cost savings for individual users while still maintaining independent optimization. In mathematical terms, the social welfare <span>${SW}^{ANC}(I)$</span> of the community is defined as the sum of the individual NPVs of each user plus an additional term <span>$\mathrm{NPV}^{sh}_{NC}(I)$</span> that accounts for the benefits or costs associated with shared resources or collective actions that naturally occur. The actual optimization problem remains the same as in the Non-Cooperative case, but the overall social welfare is adjusted to reflect the aggregated aspects of the community.</p><p class="math-container">\[{SW}^{ANC}(I) = {SW}^{ANC}(I) + \mathrm{NPV}^{sh}_{NC}\]</p></li><li><p><strong>Cooperative EC (CO)</strong>: In the <code>CO</code> configuration, all users <span>$j \in I$</span> collaborate to optimize the energy system of the entire community as a whole. The objective function is to maximize the collective NPV of the community, taking into account the energy system of each user havign objective term <span>${NPV}_j$</span> and the additional term <span>$\mathrm{NPV}^{sh}$</span> related to the shared energy. This configuration promotes cooperation and can lead to more efficient energy management and cost savings for all members.</p><p class="math-container">\[\begin{array}{ll}
\max &amp; {SW}^{CO}(I) = \sum_{j \in I} \mathrm{NPV}_j + \mathrm{NPV}^{sh} \\
\text{s.t.} &amp; \text{Users&#39; power and energy system constraints}\\
            &amp; \text{Shared energy constraints}
\end{array}\]</p></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../examples/theory_of_games/">« Fair reward allocations</a><a class="docs-footer-nextpage" href="../power_model/">User power model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Monday 8 December 2025 16:34">Monday 8 December 2025</span>. Using Julia version 1.12.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
